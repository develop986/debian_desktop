# 仮想環境インストール集

> 仮想環境は、仮想デスクトップ  
> 

## Dockerインストール

[Docker Engine インストール（Debian 向け）](https://matsuand.github.io/docs.docker.jp.onthefly/engine/install/debian/)

```
$ sudo apt-get update
$ sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release
$ curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
$ echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian \
  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
$ sudo apt-get update
$ sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin
$ sudo docker run hello-world

不要かも？
$ sudo systemctl enable docker
$ sudo systemctl start docker
```

[Install Docker Desktop on Debian](https://docs.docker.com/desktop/install/debian/)

https://desktop.docker.com/linux/main/amd64/docker-desktop-4.11.0-amd64.deb?utm_source=docker&utm_medium=webreferral&utm_campaign=docs-driven-download-linux-amd64

```
$ sudo apt install ./ダウンロード/docker-desktop-*-amd64.deb

DockerHubにログインする場合

先にDockerHubアカウントを作っておく
https://hub.docker.com/

$ wget https://github.com/docker/docker-credential-helpers/releases/download/v0.6.0/docker-credential-pass-v0.6.0-amd64.tar.gz && tar -xf docker-credential-pass-v0.6.0-amd64.tar.gz && chmod +x docker-credential-pass && sudo mv docker-credential-pass /usr/local/bin/
$ gpg --gen-key
$ pass init develop986
$ docker login
Login with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, head over to https://hub.docker.com to create one.
Username: develop986
Password: 
```

## KVMインストール

[KVM - Debian Wiki](https://wiki.debian.org/KVM#Installation)

> intel VT-x または、AMD-V が必要です  
> vmx、svm、が存在するかを確認して下さい

```
$ cat /proc/cpuinfo | grep flags |grep -e vmx -e svm

$ sudo apt -y install qemu-kvm qemu-system libvirt-daemon-system libvirt-daemon virtinst virt-manager bridge-utils libosinfo-bin
```

[KVMでゲストOSをブリッジ接続する](https://qiita.com/yoshiyasu1111/items/8d07a4fd55116fba07f7)

```
$ mcli device 
$ ip addr
$ brctl show
$ nmcli connection add type bridge ifname br0
$ ip addr
$ nmcli connection show 
$ nmcli connection show bridge-br0 | grep bridge.stp
$ nmcli connection modify bridge-br0 bridge.stp no
$ nmcli connection show bridge-br0 | grep bridge.stp
$ nmcli connection modify bridge-br0 ipv4.method manual ipv4.addresses "192.168.0.11/24" ipv4.gateway "192.168.0.1" ipv4.dns 192.168.0.1
$ nmcli connection add type bridge-slave ifname enp3s0 master bridge-br0
$ nmcli connection show 
$ nmcli connection delete Wired\ connection\ 1
$ nmcli connection show 
$ ip addr
$ nmcli device 
$ sudo reboot
```

> 仮想マシンマネージャーから仮想マシンを作成できる